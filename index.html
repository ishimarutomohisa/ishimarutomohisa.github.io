<!doctype html>    
<html lang="zh">    
<head>    
<meta charset="utf-8" />    
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />    
<link rel="icon" href="https://static.wikia.nocookie.net/disneymagicalkingdoms/images/e/ea/Update-16-app_icon.png" type="image/png">  
<title>DMK Update 101</title>    
<!-- Swiper CSS -->  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />  
<!-- Highcharts Gantt CDN -->    
<script src="https://code.highcharts.com/gantt/highcharts-gantt.js"></script>    
<!-- Swiper JS -->  
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>  
<!-- ä»»åŠ¡ç¿»è¯‘å™¨ç‹¬ç«‹JSæ–‡ä»¶ -->  
<script src="script.js"></script>  
<style>    
  :root {    
    --primary-blue: #1976d2;    
    --bg-color: #f0f2f5;    
    --card-bg: #ffffff;    
  }    
    
  body {     
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;    
    margin: 0;    
    padding: 0;  
    background: var(--bg-color);    
    color: #333;    
    min-height: 100vh;    
    overflow: hidden; /* é˜²æ­¢é¡µé¢æ»šåŠ¨ï¼Œåªå…è®¸Swiperå†…éƒ¨æ»šåŠ¨ */  
  }    
      
  /* Swiper ä¸»å®¹å™¨ */    
  .swiper {    
    width: 100%;    
    height: 100vh;  
  }    
  
  /* Swiper å¹»ç¯ç‰‡ */  
  .swiper-slide {  
    overflow-y: auto; /* å…è®¸å†…å®¹å‚ç›´æ»šåŠ¨ */  
    padding: 20px;  
    box-sizing: border-box;  
    background: var(--bg-color);  
  scrollbar-width: none;  
  -ms-overflow-style: none;  
  }    
  
.swiper-slide::-webkit-scrollbar {  
  display: none;  
}  
    
  /* åˆ†é¡µæŒ‡ç¤ºå™¨æ ·å¼ */  
  .swiper-pagination-bullet {  
    width: 10px;  
    height: 10px;  
    background-color: var(--primary-blue);  
    opacity: 0.5;  
  }  
    
  .swiper-pagination-bullet-active {  
    opacity: 1;  
  }  
    
  /* å†…å®¹å¡ç‰‡å®¹å™¨ */    
  .content-card {    
    background: var(--card-bg);    
    width: 100%;    
    max-width: 1000px; /*åœ¨å¤§å±ä¸Šé™åˆ¶æœ€å¤§å®½åº¦ */    
    border-radius: 12px;    
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);    
    padding: 24px;    
    box-sizing: border-box;    
    display: flex;    
    flex-direction: column;  
    margin: 0 auto; /* å±…ä¸­ */  
  }    
      
  /* å¤´éƒ¨æ ‡é¢˜åŒºåŸŸ */    
  h1 {     
    display: flex;     
    flex-wrap: wrap; /* å…è®¸å°å±æ¢è¡Œ */    
    align-items: center;     
    gap: 12px;     
    margin: 0 0 16px 0;    
  }    
      
  .outline-effect {    
    color: #207CE2;    
    text-shadow: 1px 1px 0 #fff, 2px 2px 4px rgba(30, 58, 138, 0.3);    
    font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;    
    font-size: clamp(20px, 4vw, 32px); /* å“åº”å¼å­—ä½“ */    
    margin-right: auto;    
  }    
      
  /* æŒ‰é’®ç»„ */    
  .btn-group {    
    display: flex;    
    gap: 8px;    
    flex-wrap: wrap;    
  }    
    
  h1 button {    
    background: var(--primary-blue);    
    color: #fff;    
    border: none;    
    border-radius: 6px;    
    padding: 8px 16px;    
    font-size: 14px;    
    cursor: pointer;    
    white-space: nowrap;    
    transition: background 0.2s;    
  }    
      
  h1 button:hover {    
    background: #1565c0;    
  }    
    
  .note {     
    color: #666;     
    font-size: 14px;     
    margin-bottom: 12px;     
    background: #fff8e1;    
    padding: 8px 12px;    
    border-radius: 4px;    
    border-left: 4px solid #ffc107;    
  }    
      
  /* é¡¶éƒ¨å›¾ç‰‡ */    
  .top-image {     
    width: 100%;    
    height: auto;    
    display: block;    
    border-radius: 8px;    
    margin-bottom: 20px;    
  }    
      
  /* å›¾è¡¨æ»šåŠ¨å®¹å™¨ */    
  .chart-wrapper {    
    width: 100%;    
    overflow-x: auto; /* å…è®¸æ¨ªå‘æ»šåŠ¨ */    
    -webkit-overflow-scrolling: touch; /* iOS å¹³æ»‘æ»šåŠ¨ */    
    border: 1px solid #eee;    
    border-radius: 6px;    
    background: #fff;    
    padding-bottom: 4px;     
  }    
      
  .chart-wrapper::-webkit-scrollbar {    
    height: 8px;    
  }    
  .chart-wrapper::-webkit-scrollbar-thumb {    
    background: #ccc;    
    border-radius: 4px;    
  }    
    
  /* å›¾è¡¨æœ¬ä½“ */    
  #container {     
    height: auto;     
    min-width: 800px;     
    margin: 0;     
    padding: 0;    
  }    
  
  /* ç¬¬äºŒé¡µçš„å›¾ç‰‡å®¹å™¨ */  
  .image-page {  
    display: flex;  
    justify-content: center;  
    align-items: center;  
    width: 100%;  
    height: 100%;  
    padding: 20px;  
    box-sizing: border-box;  
  }  
    
  .full-image-container {  
    max-width: 1200px;  
    max-height: 90vh;  
    display: flex;  
    justify-content: center;  
    align-items: center;  
    background: var(--card-bg);  
    border-radius: 12px;  
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);  
    padding: 20px;  
    box-sizing: border-box;  
  }  
    
  .full-image {  
    max-width: 100%;  
    max-height: 100%;  
    border-radius: 8px;  
    object-fit: contain;  
  }  
    
  /* ç§»åŠ¨ç«¯é€‚é… */    
  @media (max-width: 600px) {    
    .swiper-slide {  
      padding: 10px;  
    }  
      
    .content-card {    
      padding: 15px;    
    }  
      
    h1 { flex-direction: column; align-items: flex-start; }    
    .btn-group { width: 100%; }    
    h1 button { flex: 1; text-align: center; }    
      
    .image-page {  
      padding: 10px;  
    }  
      
    .full-image-container {  
      padding: 10px;  
    }  
  }

/* æ›´ç®€æ´çš„ç‰ˆæœ¬ - å®Œå…¨å»é™¤å¤–æ¡† */  
.translator-page {  
  width: 100%;  
  height: 100%;  
  padding: 0;  
  box-sizing: border-box;  
  display: flex;  
  justify-content: center;  
  align-items: flex-start;  
  background: var(--bg-color);  
  overflow-y: auto; /* å…è®¸é¡µé¢æ»šåŠ¨ */  
}  
  
.translator-container {  
  width: 98%;  
  max-width: none; /* ç§»é™¤æœ€å¤§å®½åº¦é™åˆ¶ */  
  background: transparent; /* é€æ˜èƒŒæ™¯ */  
  padding: 20px;  
  border-radius: 0;  
  box-sizing: border-box;  
  display: flex;  
  flex-direction: column;  
  box-shadow: none;  
  border: none;  
}  
  
.translator-container h2 {  
  color: #207CE2;  
  text-align: center;  
  margin-top: 10px;  
  margin-bottom: 25px;  
  font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;  
  text-shadow: 1px 1px 0 #fff, 2px 2px 4px rgba(30, 58, 138, 0.3);  
  font-size: 32px;  
}  
  
.translator-content {  
  display: flex;  
  gap: 30px;  
  flex-wrap: wrap;  
  flex: 1;  
}  
  
.translator-box {  
  flex: 1;  
  min-width: 45%; /* ä½¿ç”¨ç™¾åˆ†æ¯”å®½åº¦ */  
  display: flex;  
  flex-direction: column;  
  background: transparent; /* é€æ˜èƒŒæ™¯ */  
  border-radius: 0;  
  padding: 0;  
  box-shadow: none; /* å»é™¤é˜´å½± */  
}  
  
/* æ–‡æœ¬æ¡†ç›´æ¥ä½¿ç”¨å¡ç‰‡æ ·å¼ */  
.translator-box textarea {  
  width: 100%;  
  height: 400px; /* è¿›ä¸€æ­¥å¢åŠ é«˜åº¦ */  
  padding: 20px;  
  border: 2px solid #ddd;  
  border-radius: 8px;  
  font-family: 'Courier New', monospace;  
  font-size: 15px;  
  resize: none;  
  box-sizing: border-box;  
  background-color: #fff;  
  box-shadow: 0 2px 10px rgba(0,0,0,0.08); /* åªç»™æ–‡æœ¬æ¡†æ·»åŠ è½»å¾®é˜´å½± */  
  line-height: 1.6;  
}  
  
.translator-box textarea#inputData {  
  background-color: #fff;  
}  
  
/* ç¿»è¯‘å™¨ç»“æœæ¡†æ ·å¼ä¿®æ”¹ */  
.translator-box textarea#resultArea {  
  background-color: #f8f9fa;  
  color: #222;  
  /* ä¸æ¢è¡Œè®¾ç½® */  
  white-space: pre; /* ä¿ç•™ç©ºç™½ç¬¦ï¼Œä¸è‡ªåŠ¨æ¢è¡Œ */  
  overflow-x: auto; /* æ°´å¹³æ»šåŠ¨ */  
  overflow-y: auto; /* å‚ç›´æ»šåŠ¨ */  
  word-wrap: normal; /* ä¸è‡ªåŠ¨æ¢è¡Œå•è¯ */  
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace; /* ä½¿ç”¨ç­‰å®½å­—ä½“ */  
  font-size: 14px;  
  line-height: 1.4;    
  resize: none; /* ç¦ç”¨è°ƒæ•´å¤§å° */  
}  
  
/* è¾“å…¥æ¡†ä¿æŒåŸæœ‰æ¢è¡Œè¡Œä¸º */  
.translator-box textarea#inputData {  
  background-color: #fff;  
  white-space: pre-wrap; /* è‡ªåŠ¨æ¢è¡Œ */  
  word-wrap: break-word; /* é•¿å•è¯æ¢è¡Œ */  
  overflow-wrap: break-word;  
  resize: none; /* ç¦ç”¨è°ƒæ•´å¤§å° */  
}  
  
/* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */  
.translator-box textarea {  
  scrollbar-width: thin; /* Firefox */  
  scrollbar-color: #aaa #f0f0f0;  
}  
  
.translator-box textarea::-webkit-scrollbar {  
  width: 12px; /* å‚ç›´æ»šåŠ¨æ¡å®½åº¦ */  
  height: 12px; /* æ°´å¹³æ»šåŠ¨æ¡é«˜åº¦ */  
}  
  
.translator-box textarea::-webkit-scrollbar-track {  
  background: #f0f0f0;  
  border-radius: 4px;  
}  
  
.translator-box textarea::-webkit-scrollbar-thumb {  
  background: #aaa;  
  border-radius: 4px;  
}  
  
.translator-box textarea::-webkit-scrollbar-thumb:hover {  
  background: #888;  
}  
  
.translator-box textarea::-webkit-scrollbar-corner {  
  background: #f0f0f0;  
}  
  
/* å½“ç»“æœæ¡†å†…å®¹å¾ˆé•¿æ—¶ï¼Œæ·»åŠ è§†è§‰æç¤º */  
.translator-box textarea#resultArea:focus {  
  border-color: #1976d2;  
  box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.15);  
}  
  
/* æ·»åŠ æ°´å¹³æ»šåŠ¨æç¤ºæ ·å¼ */  
.result-scroll-hint {  
  display: none; /* é»˜è®¤éšè— */  
  position: absolute;  
  bottom: 10px;  
  right: 10px;  
  background: rgba(25, 118, 210, 0.8);  
  color: white;  
  padding: 4px 8px;  
  border-radius: 4px;  
  font-size: 12px;  
  z-index: 10;  
}  
  
/* ç§»åŠ¨ç«¯é€‚é… */  
@media (max-width: 768px) {  
.translator-box textarea {  
    height: 250px; /* ç§»åŠ¨ç«¯å‡å°‘é«˜åº¦ */  
    resize: none; /* ç¡®ä¿ç§»åŠ¨ç«¯ä¹Ÿç¦ç”¨è°ƒæ•´å¤§å° */  
  }  
  .translator-box textarea#resultArea {  
    font-size: 13px;  
    /* åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå…è®¸å°å±å¹•æ¢è¡Œï¼Œæˆ–è€…ä¿æŒæ°´å¹³æ»šåŠ¨ */  
    white-space: pre-wrap; /* ç§»åŠ¨ç«¯è‡ªåŠ¨æ¢è¡Œæ›´å‹å¥½ */  
  }  
    
  /* åªåœ¨æ¡Œé¢ç«¯ä¿æŒä¸æ¢è¡Œ */  
  @media (min-width: 769px) {  
    .translator-box textarea#resultArea {  
      white-space: pre; /* æ¡Œé¢ç«¯ä¸æ¢è¡Œ */  
    }  
  }  
}  
  
.translator-box label {  
  font-weight: bold;  
  margin-bottom: 12px;  
  color: #333;  
  font-size: 17px;  
  padding-left: 5px;  
}  
  
  .translator-controls {  
    margin: 30px 0 20px 0;  
    display: flex;  
    justify-content: center;  
    width: 100%;  
  }  
  
  /* ç¾åŒ–åçš„ç”ŸæˆæŒ‰é’®æ ·å¼ */  
  .generate-btn {  
    background: linear-gradient(135deg, #1976d2 0%, #42a5f5 100%);  
    color: white;  
    border: none;  
    border-radius: 50px; /* èƒ¶å›Šå½¢çŠ¶ */  
    padding: 12px 48px;  
    font-size: 18px;  
    font-weight: bold;  
    cursor: pointer;  
    box-shadow: 0 4px 15px rgba(25, 118, 210, 0.4);  
    transition: all 0.3s ease;  
    letter-spacing: 1px;  
    outline: none;  
    position: relative;  
    overflow: hidden;  
  }  
  
  .generate-btn:hover {  
    transform: translateY(-2px);  
    box-shadow: 0 6px 20px rgba(25, 118, 210, 0.6);  
    background: linear-gradient(135deg, #1565c0 0%, #2196f3 100%);  
  }  
  
  .generate-btn:active {  
    transform: translateY(1px);  
    box-shadow: 0 2px 8px rgba(25, 118, 210, 0.4);  
  }  
  
  /* ç§»åŠ¨ç«¯é€‚é…è°ƒæ•´ */  
  @media (max-width: 768px) {  
    .translator-controls {  
      flex-direction: row; /* ä¿æŒæ°´å¹³å±…ä¸­ */  
      gap: 0;  
      margin-bottom: 30px; /* å¢åŠ åº•éƒ¨é—´è·é˜²æ­¢è¢«é”®ç›˜é®æŒ¡ */  
    }  
      
    .generate-btn {  
      width: 80%; /* ç§»åŠ¨ç«¯æŒ‰é’®å®½ä¸€ç‚¹ */  
      padding: 12px 0;  
    }  
  }  

  
/* å¤§å±å¹•é€‚é… */  
@media (min-width: 1200px) {  
  .translator-content {  
    gap: 40px;  
  }  
    
  .translator-box {  
    min-width: 48%;  
  }  
    
  .translator-box textarea {  
    height: 550px; /* å¤§å±å¹•ä¸Šå¢åŠ é«˜åº¦ */  
  }  
}  
  
/* ç§»åŠ¨ç«¯é€‚é… */  
@media (max-width: 768px) {  
  .translator-content {  
    flex-direction: column;  
    gap: 25px;  
  }  
    
  .translator-box {  
    width: 100%;  
    min-width: unset;  
  }  
    
  .translator-box textarea {  
    height: 280px;  
    padding: 15px;  
  }  
    
  .translator-container {  
    padding: 15px;  
    width: 100%;  
  }  
    
  .translator-container h2 {  
    font-size: 26px;  
    margin-bottom: 20px;  
  }  
    
  .translator-controls {  
    flex-direction: column;  
    align-items: center;  
    gap: 15px;  
  }  
}  

/* --- è¡¨æ ¼å®¹å™¨æ ·å¼ --- */  
.table-wrapper {  
  width: 100%;  
  height: 500px; /* ä¸è¾“å…¥æ¡†é«˜åº¦ä¿æŒä¸€è‡´ */  
  overflow-x: auto;  /* å…³é”®ï¼šå¯ç”¨æ¨ªå‘æ»šåŠ¨ */
  overflow-y: auto; /* å‚ç›´æ»šåŠ¨ */  
  border: 2px solid #ddd;  
  border-radius: 8px;  
  background-color: #fff;  
  box-shadow: 0 2px 10px rgba(0,0,0,0.08);  
}  
  
/* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */  
.table-wrapper::-webkit-scrollbar {  
  width: 8px;  
  height: 8px;  
}  
.table-wrapper::-webkit-scrollbar-track {  
  background: #f1f1f1;  
  border-radius: 4px;  
}  
.table-wrapper::-webkit-scrollbar-thumb {  
  background: #ccc;  
  border-radius: 4px;  
}  
  
/* --- è¡¨æ ¼æœ¬ä½“æ ·å¼ --- */  
.dmk-table {  
  width: 100%;  
  border-collapse: collapse;  
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;  
  font-size: 14px;  
}  
  
/* è¡¨å¤´ */  
.dmk-table thead th {  
  position: sticky; /* å›ºå®šè¡¨å¤´ */  
  top: 0;  
  background-color: #f8f9fa;  
  color: #1976d2;  
  padding: 12px 15px;  
  text-align: left;  
  font-weight: 600;  
  border-bottom: 2px solid #e0e0e0;  
  cursor: pointer; /* é¼ æ ‡å˜ä¸ºæ‰‹å‹è¡¨ç¤ºå¯æ’åº */  
  transition: background-color 0.2s;  
  z-index: 10;  
  white-space: nowrap;  
}  
  
.dmk-table thead th:hover {  
  background-color: #e3f2fd;  
}  
  
/* æ’åºç®­å¤´æŒ‡ç¤ºå™¨ */  
.dmk-table thead th::after {  
  content: 'â†•';  
  font-size: 12px;  
  margin-left: 5px;  
  opacity: 0.3;  
}  
.dmk-table thead th.asc::after {  
  content: 'â†‘';  
  opacity: 1;  
  color: #1976d2;  
}  
.dmk-table thead th.desc::after {  
  content: 'â†“';  
  opacity: 1;  
  color: #1976d2;  
}  
  
/* è¡¨æ ¼å†…å®¹è¡Œ */  
.dmk-table tbody tr {  
  border-bottom: 1px solid #eee;  
  transition: background-color 0.15s;  
}  
  
.dmk-table tbody tr:nth-of-type(even) {  
  background-color: #fcfcfc;  
}  
  
.dmk-table tbody tr:hover {  
  background-color: #f0f7ff; /* æ‚¬åœé«˜äº® */  
}  
  
.dmk-table tbody td {  
  padding: 10px 15px;  
  color: #333;  
  line-height: 1.4;  
  white-space: nowrap; /* å…³é”®ï¼šå¼ºåˆ¶ä¸æ¢è¡Œ[1](@ref)[2](@ref)[3](@ref) */
  word-break: keep-all; /* ä¿æŒå•è¯å®Œæ•´ä¸æ¢è¡Œ[3](@ref) */
}  
  
/* ç‰¹å®šåˆ—å®½ä¼˜åŒ– */  
.col-char { width: 30%; font-weight: 500; }  
.col-task { width: 40%; }  
.col-time { width: 15%; }  
.col-extra { width: 15%; }  
  
/* ç§»åŠ¨ç«¯é€‚é… */  
@media (max-width: 768px) {  
  .table-wrapper {  
    height: 300px;  
  }  
  .dmk-table {  
    font-size: 12px;  
  }  
  .dmk-table tbody td, .dmk-table thead th {  
    padding: 8px 10px;  
  }  
}  
  
</style>    
</head>    
<body>    
  <!-- Swiper å®¹å™¨ - ä¸¤ä¸ªå®Œå…¨ç‹¬ç«‹çš„é¡µé¢ -->  
  <div class="swiper">  
    <div class="swiper-wrapper">  
      <!-- ç¬¬ä¸€é¡µï¼šå†…å®¹é¡µ -->  
      <div class="swiper-slide">  
        <div class="content-card">  
          <h1>    
            <span id="headerTitle" class="outline-effect">DMK Update 101</span>    
            <div class="btn-group">    
              <button id="btnPatch">Patch Note</button>    
              <button id="btnWiki">Wiki</button>    
              <button onclick="window.open('https://www.facebook.com/DisneyMagicKingdoms')">Facebook</button>    
              <button onclick="window.open('https://discord.com/channels/981942496630304818/1288901443511910511')">Discord</button>    
              <button onclick="window.open('https://github.com/ishimarutomohisa/ishimarutomohisa.github.io/edit/main/index.html')">Github</button>    
            </div>    
          </h1>    
              
          <div class="note">âš ï¸ Dreamsparks will not be available in UP101, most probably in UP103.</div>    
              
          <img id="topImage" class="top-image"    
               src="https://dmk.assets.gameloft.com/assets/UPD_101_Pack_Art_Avatar_full_6416x2484_Full_1_ac668e4c4c.jpg"    
               alt="Disney Magic Kingdoms Artwork"     
               onerror="this.style.display='none'" />    
              
          <div class="chart-wrapper">    
            <div id="container"></div>    
          </div>  
        </div>  
      </div>  
        
      <!-- ç¬¬äºŒé¡µï¼šä»»åŠ¡ç¿»è¯‘å™¨ -->  
<div class="swiper-slide">    
  <div class="translator-page">    
    <div class="translator-container">    
      <h2>ä»»åŠ¡ä¿¡æ¯ç”Ÿæˆå™¨</h2>    
          
      <div class="translator-content">    
        <!-- è¾“å…¥åŒº -->    
        <div class="translator-box">    
          <label for="inputData">è¾“å…¥ä»»åŠ¡åˆ—è¡¨ (æ ¼å¼: è§’è‰² - ä»»åŠ¡å)</label>    
          <textarea id="inputData" placeholder="ä¾‹å¦‚ï¼š      
Atta - Review a Report      
Atta - Have Fun at the Circus      
Dot - It's Just a Rock"></textarea>    
        </div>    
      
        <!-- è¾“å‡ºåŒº -->    
        <div class="translator-box">    
          <label>ç”Ÿæˆç»“æœ (ç‚¹å‡»è¡¨å¤´æ’åº)</label>    
          <div class="table-wrapper" id="resultTableContainer">    
            <table class="dmk-table" id="resultTable">    
              <thead>    
                <tr>    
                  <!-- onclickç»‘å®šæ’åºå‡½æ•°ï¼Œå‚æ•°æ˜¯åˆ—çš„ç´¢å¼• -->    
                  <th class="col-char" onclick="sortTable(0)">è§’è‰² (Character)</th>    
                  <th class="col-task" onclick="sortTable(1)">ä»»åŠ¡ (Task)</th>    
                  <th class="col-time" onclick="sortTable(2)">æ—¶é•¿ (Time)</th>    
                  <th class="col-building" onclick="sortTable(3)">å»ºç­‘ (Building)</th>  
                  <th class="col-extra" onclick="sortTable(4)">å…¶ä»–</th>    
                </tr>    
              </thead>    
              <tbody id="tableBody">    
                <!-- JSå°†åœ¨è¿™é‡Œç”Ÿæˆè¡Œ -->    
                <tr><td colspan="4" style="text-align:center; color:#999; padding:20px;">ç­‰å¾…ç”Ÿæˆæ•°æ®...</td></tr>    
              </tbody>    
            </table>    
          </div>    
          <div id="tableStats"></div>  
        </div>    
      </div>    
      
      <div class="translator-controls">    
        <button class="generate-btn" onclick="translateTasks()">âœ¨ ç”Ÿæˆä¿¡æ¯ âœ¨</button>    
        <!-- å·²åˆ é™¤å¤åˆ¶ç»“æœæŒ‰é’® -->    
      </div>    
    </div>    
  </div>    
</div>  

    </div>  
      
    <!-- åˆ†é¡µæŒ‡ç¤ºå™¨ -->  
    <div class="swiper-pagination"></div>  
  </div>  
  
<script>    
// ==========================================    
// 0. å…¨å±€é…ç½® (ä¿®æ”¹è¿™é‡Œå³å¯æ›´æ–°ç‰ˆæœ¬)    
// ==========================================    
const CONFIG = {    
  version: '101', // ğŸ› ï¸ åªéœ€è¦æ”¹è¿™ä¸ªæ•°å­—ï¼Œæ‰€æœ‰é“¾æ¥å’Œæ ‡é¢˜éƒ½ä¼šè‡ªåŠ¨æ›´æ–°    
};    
  
// ==========================================    
// 1. åˆå§‹åŒ– Swiper  
// ==========================================    
let swiper;  
document.addEventListener('DOMContentLoaded', function() {  
  swiper = new Swiper('.swiper', {  
    direction: 'vertical',  
    slidesPerView: 1,  
    spaceBetween: 0,  
    mousewheel: {  
      forceToAxis: true,  
      sensitivity: 1,  
      releaseOnEdges: true,  
    },  
    pagination: {  
      el: '.swiper-pagination',  
      clickable: true,  
    },  
    keyboard: {  
      enabled: true,  
      onlyInViewport: true,  
    },  
    touchRatio: 1,  
    slideToClickedSlide: false,  
    freeMode: false,  
    // é˜²æ­¢åœ¨å†…å®¹åŒºåŸŸæ»šåŠ¨æ—¶è§¦å‘é¡µé¢åˆ‡æ¢  
    simulateTouch: true,  
    allowTouchMove: true,  
    // æ·»åŠ é˜²æŠ–ï¼Œé˜²æ­¢è¯¯è§¦  
    threshold: 10,  
  });  
    
  // ç›‘å¬å¹»ç¯ç‰‡åˆ‡æ¢äº‹ä»¶  
  swiper.on('slideChange', function() {  
    // å½“åˆ‡æ¢åˆ°ç¬¬ä¸€é¡µï¼ˆç´¢å¼•0ï¼‰æ—¶ï¼Œæ»šåŠ¨åˆ°é¡¶éƒ¨  
    if (swiper.activeIndex === 0) {  
      // è·å–ç¬¬ä¸€é¡µçš„å¹»ç¯ç‰‡å…ƒç´   
      const firstSlide = swiper.slides[0];  
      // å°†æ»šåŠ¨ä½ç½®è®¾ç½®ä¸ºé¡¶éƒ¨  
      firstSlide.scrollTop = 0;  
        
      // ç¡®ä¿å›¾è¡¨å®¹å™¨çš„æ»šåŠ¨æ¡ä¹Ÿå›åˆ°èµ·å§‹ä½ç½®  
      const chartWrapper = document.querySelector('.chart-wrapper');  
      if (chartWrapper) {  
        chartWrapper.scrollLeft = 0;  
      }  
    }  
  });  
    
  // é˜»æ­¢å†…å®¹åŒºåŸŸæ»šåŠ¨æ—¶è§¦å‘é¡µé¢åˆ‡æ¢  
  const slides = document.querySelectorAll('.swiper-slide');  
  slides.forEach(slide => {  
    slide.addEventListener('wheel', function(e) {  
      // åªæœ‰å½“å†…å®¹æ»šåŠ¨åˆ°é¡¶éƒ¨æˆ–åº•éƒ¨æ—¶ï¼Œæ‰å…è®¸è§¦å‘é¡µé¢åˆ‡æ¢  
      const isAtTop = slide.scrollTop === 0;  
      const isAtBottom = slide.scrollHeight - slide.scrollTop === slide.clientHeight;  
        
      if ((e.deltaY > 0 && !isAtBottom) || (e.deltaY < 0 && !isAtTop)) {  
        e.stopPropagation();  
      }  
    }, { passive: false });  
  });  
});  
  
// ==========================================    
// 2. åˆå§‹åŒ–é¡µé¢å†…å®¹ (æ ‡é¢˜ã€é“¾æ¥)    
// ==========================================    
(function initPageContent() {    
  const v = CONFIG.version;    
      
  // 1. æ›´æ–°ç½‘é¡µ <title>    
  document.title = `DMK Update ${v}`;    
      
  // 2. æ›´æ–°é¡µé¢å¤§æ ‡é¢˜æ–‡æœ¬    
  const headerTitle = document.getElementById('headerTitle');    
  if (headerTitle) headerTitle.innerText = `DMK Update ${v}`;    
      
  // 3. ç»‘å®š Patch Note æŒ‰é’®é“¾æ¥    
  const btnPatch = document.getElementById('btnPatch');    
  if (btnPatch) {    
    btnPatch.onclick = function() {    
      window.open(`https://www.disney-magic-kingdoms.com/news/patchnote_upd${v}`);    
    };    
  }    
      
  // 4. ç»‘å®š Wiki æŒ‰é’®é“¾æ¥    
  const btnWiki = document.getElementById('btnWiki');    
  if (btnWiki) {    
    btnWiki.onclick = function() {    
      window.open(`https://dmk.fandom.com/wiki/Category:Update_${v}`);    
    };    
  }    
})();    
  
// ==========================================    
// 3. å›¾ç‰‡åŠ è½½è¶…æ—¶æ§åˆ¶é€»è¾‘    
// ==========================================    
function handleImageLoading(imgId) {    
  const img = document.getElementById(imgId);    
  if (!img) return;  
    
  const timeoutDuration = 5000; // è®¾ç½®è¶…æ—¶æ—¶é—´ï¼š5000æ¯«ç§’ (5ç§’)    
    
  // å¦‚æœè„šæœ¬æ‰§è¡Œæ—¶å›¾ç‰‡å·²ç»åŠ è½½å®Œäº†ï¼ˆæ¯”å¦‚æ¥è‡ªç¼“å­˜ï¼‰ï¼Œç›´æ¥è¿”å›    
  if (img.complete) return;    
    
  // è®¾ç½®å®šæ—¶å™¨    
  const timer = setTimeout(() => {    
    // å†æ¬¡æ£€æŸ¥ï¼Œå¦‚æœè¿˜æ²¡å®Œæˆ    
    if (!img.complete) {    
      console.warn('Image loading timed out (' + timeoutDuration + 'ms). Hiding image.');    
      img.src = ''; // ç½®ç©º src åœæ­¢ç½‘ç»œè¯·æ±‚    
      img.style.display = 'none'; // éšè—å…ƒç´     
    }    
  }, timeoutDuration);    
    
  // å¦‚æœåŠ è½½æˆåŠŸï¼Œæ¸…é™¤å®šæ—¶å™¨    
  img.onload = () => clearTimeout(timer);    
      
  // å¦‚æœåŠ è½½æœ¬èº«å°±æŠ¥é”™ï¼ˆ404ç­‰ï¼‰ï¼Œæ¸…é™¤å®šæ—¶å™¨å¹¶éšè—    
  img.onerror = () => {    
    clearTimeout(timer);    
    img.style.display = 'none';    
  };    
}    
  
// åˆå§‹åŒ–ä¸¤ä¸ªå›¾ç‰‡çš„è¶…æ—¶æ§åˆ¶  
document.addEventListener('DOMContentLoaded', function() {  
  handleImageLoading('topImage');  
  handleImageLoading('fullSizeImage');  
});  
  
// ==========================================    
// 4. Highcharts ç”˜ç‰¹å›¾é€»è¾‘    
// ==========================================    
const schedules = [    
  { resource: '', tasks: [{start: '2025-12-10', end: '2025-12-14', label: 'Virus'},] },    
  { resource: '', tasks: [{start: '2025-12-11', end: '2025-12-14', label: 'Storm Cloud'},] },    
  { resource: '', tasks: [{start: '2025-12-24', end: '2025-12-29', label: 'Dreamland Quest'},] },    
  { resource: '', tasks: [    
      {start: '2025-12-15', end: '2026-01-05', label: 'Avatar â€“ Mega Event'},    
      {start: '2025-12-15', end: '2025-12-18', label: 'Chapter 1'},    
      {start: '2025-12-18', end: '2025-12-24', label: 'Chapter 2'},    
      {start: '2025-12-24', end: '2025-12-31', label: 'Chapter 3'},    
      {start: '2025-12-31', end: '2026-01-05', label: 'Chapter 4'},    
      {start: '2025-12-18', end: '2025-12-21', label: 'Striking Gold'},    
      {start: '2025-12-25', end: '2025-12-28', label: 'Striking Gold'},    
      {start: '2026-01-01', end: '2026-01-04', label: 'Striking Gold'},    
    ]    
  }, 
];    
    
const colors = ['#4CAF50', '#2196F3', '#FF9800', '#9C27B0', '#F44336', '#3F51B5', '#00BCD4'];    
    
function toUtcMs(ymd) {    
  const parts = ymd.split('-').map(Number);    
  return Date.UTC(parts[0], parts[1]-1, parts[2], 23);    
}    
    
function endToUtcMsInclusive(ymd) {    
  const parts = ymd.split('-').map(Number);    
  return Date.UTC(parts[0], parts[1]-1, parts[2], 23);    
}    
    
function computeLanesForTasks(tasks) {    
  const sorted = tasks.slice().sort((a,b) => a.start.localeCompare(b.start));    
  const lanes = [];    
  for (const t of sorted) {    
    let placed = false;    
    const sA = toUtcMs(t.start);    
    const eA = endToUtcMsInclusive(t.end);    
    for (const lane of lanes) {    
      const last = lane[lane.length - 1];    
      const sB = toUtcMs(last.start);    
      const eB = endToUtcMsInclusive(last.end);    
      if (sA >= eB) {    
        lane.push(t);    
        placed = true;    
        break;    
      }    
    }    
    if (!placed) lanes.push([t]);    
  }    
  return lanes;    
}    
    
const categories = [];    
const plotBands = [];    
const seriesData = [];    
let globalLaneIndex = 0;    
let colorIdx = 0;    
    
for (let r = 0; r < schedules.length; r++) {    
  const res = schedules[r];    
  const lanes = computeLanesForTasks(res.tasks);    
    
  const startLane = globalLaneIndex;    
  const endLane = globalLaneIndex + lanes.length - 1;    
  plotBands.push({    
    from: startLane - 0.5,    
    to: endLane + 0.5,    
    color: (r % 2 === 0) ? 'rgba(250,250,250,0.9)' : 'rgba(245,245,255,0.95)',    
    label: {    
      align: 'left',    
      x: 6,    
      y: 6,    
      style: { color: '#666', fontSize: '12px' }    
    }    
  });    
    
  for (let li = 0; li < lanes.length; li++) {    
    categories.push(li === 0 ? res.resource : '');    
    for (const t of lanes[li]) {    
      seriesData.push({    
        id: `$${res.resource}_$${t.label}_${Math.random().toString(36).slice(2,8)}`,    
        name: t.label,    
        start: toUtcMs(t.start),    
        end: endToUtcMsInclusive(t.end),    
        y: globalLaneIndex,    
        color: colors[(colorIdx++) % colors.length],    
        custom: { resource: res.resource }    
      });    
    }    
    globalLaneIndex++;    
  }    
}    
    
const minStartMs = Math.min(...seriesData.map(d => d.start));    
const xAxisMin = minStartMs - (24*3600*1000);    
const nowMs = Date.now() + 8*3600*1000;    
  
// DOM åŠ è½½å®Œæˆååˆ›å»ºå›¾è¡¨  
document.addEventListener('DOMContentLoaded', function() {  
  Highcharts.ganttChart('container', {    
    chart: {    
      height: Math.max(300, categories.length * 28 + 100), // ç•¥å¾®è°ƒæ•´é«˜åº¦è®¡ç®—    
      style: { fontFamily: 'inherit' }    
    },    
    tooltip: {    
      enabled: false,  
      pointFormatter: function () {    
        const p = this;    
        const s = new Date(p.start), e = new Date(p.end);    
        const fmt = d => d.getUTCFullYear() + '-' + String(d.getUTCMonth()+1).padStart(2,'0') + '-' + String(d.getUTCDate()).padStart(2,'0');    
        return '';    
      },    
      headerFormat: ''    
    },    
    xAxis: [{    
      min: xAxisMin,    
      tickInterval: 24 * 3600 * 1000,    
      labels: {    
        format: '{value:%d}',    
        style: { color: '#333', fontSize: '12px' }    
      },    
      plotLines: [{    
        value: nowMs,    
        color: '#FF3B30',    
        width: 2,    
        dashStyle: 'ShortDash',    
        zIndex: 3,    
        label: { rotation: 0, x: 9, y: -4, text: 'ï¸ğŸ”»', align: 'right', style: { color: '#FF3B30' } }    
      }, {    
        value: toUtcMs('2025-12-25'),    
        color: '#30C2FF',    
        width: 2,    
        dashStyle: 'ShortDash',    
        zIndex: 2,    
        label: { rotation: 0, x: 9, y: -4, text: 'ğŸ', align: 'right' }    
      }]    
    }],    
    yAxis: {    
      categories: categories,    
      reversed: true,    
      grid: { enabled: true, borderColor: '#eee' },    
      labels: { enabled: false },    
      plotBands: plotBands,    
      tickLength: 0    
    },    
    series: [{    
      name: 'ä»»åŠ¡',    
      data: seriesData,    
      dataLabels: {    
        enabled: true,    
        format: '{point.name}', // ç›´æ¥æ˜¾ç¤ºåå­—     
        allowOverlap: true,     // å…è®¸æ–‡å­—é‡å ï¼ˆé˜²æ­¢è¢«è‡ªåŠ¨éšè—ï¼‰    
        padding: 0,    
        style: {     
          color: '#fff',     
          textOutline: '2px #000000', // å…³é”®ï¼šé»‘è‰²æè¾¹ï¼Œç¡®ä¿åœ¨äº®è‰²æ¡ä¸Šä¹Ÿçœ‹å¾—æ¸…    
          fontWeight: 'bold',    
          fontSize: '11px',    
          textOverflow: 'none' // ä¸æ˜¾ç¤ºçœç•¥å·ï¼Œå°½é‡æ˜¾ç¤ºå…¨æ–‡    
        }    
      },    
      borderRadius: 3,    
      borderWidth: 0    
    }],    
    exporting: { enabled: true },    
    credits: { enabled: false },
	accessibility: { enabled: false }
  });  
});  
</script>    
</body>    
</html>    
